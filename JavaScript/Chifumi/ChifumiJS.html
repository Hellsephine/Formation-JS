<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>ChifumiJS</title>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center">Chifumi contre une IA</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <h2 class="text-center">Score : <span id="Joueur-Score">0</span> - <span id="IA-Score">0</span></h2>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <p class="text-center">Choississez une action a faire</p>
            </div>  
        </div>
        <div class="row">
            <div class="col-12">
                <div class="text-center">
                    <button type="button" id="btn-pierre"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Rock-paper-scissors_%28rock%29.png/200px-Rock-paper-scissors_%28rock%29.png" alt="pierre">
                    </button>
                    <button type="button" id="btn-feuille"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Rock-paper-scissors_%28paper%29.png/200px-Rock-paper-scissors_%28paper%29.png" alt="feuille">
                    </button>
                    <button type="button" id="btn-ciseaux"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Rock-paper-scissors_%28scissors%29.png/200px-Rock-paper-scissors_%28scissors%29.png" alt="ciseaux">
                    </button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <h3 class="text-center m-3" id="result"></h3>
            </div>
        </div>
    </div>
    <script>
        const JS = document.getElementById("Joueur-Score");
        const IAS = document.getElementById("IA-Score");



        const b1 = document.getElementById("btn-pierre");
        b1.addEventListener('click',
        function(){
            play(0);
        });
        const b2 = document.getElementById("btn-feuille");
        b2.addEventListener('click',
        function(){
            play(1);
        });
        const b3 = document.getElementById("btn-ciseaux");
        b3.addEventListener('click',
        function(){
            play(2);
        });

        let play = function(CJ){
            const CIA = Math.floor(Math.random()*3);
            let r;
            if(CJ === CIA){
                console.log("Draw");
                r = 'Draw';
            }
            else if(CJ == 0 && CIA == 2){
                console.log("Win");
                r = 'Win';
            }
            else if(CJ == 0 && CIA == 1){
                console.log("Lose");
                r = 'Lose';
            }
            else if(CJ == 1 && CIA == 0){
                console.log("Win");
                r = 'Win';
            }
            else if(CJ == 1 && CIA == 2){
                console.log("Lose");
                let r = 'Lose';
            }
            else if(CJ == 2 && CIA == 0){
                console.log("Lose");
                r = 'Lose';
            }
            else if(CJ == 2 && CIA == 1){
                console.log("Win");
                let r = 'Win';
            }
            results(r);
            score(r);
        }

        let results = function(r){
            if(r == 'Draw'){
                document.getElementById("result").innerHTML = "It's a Draw !";
                document.body.style.backgroundColor = 'white';
            }
            else if(r == 'Win'){
                document.getElementById("result").innerHTML = 'Incredible you Win !';
                document.body.style.backgroundColor = 'green';
            }
            else if(r == 'Lose'){
                document.getElementById("result").innerHTML = 'Sadly you Lose !';
                document.body.style.backgroundColor = 'blue';
            }
        }

        let score = function(r){
            if(r == 'Win'){
                JS.innerHTML = parseInt(JS.textContent)+1;
            }
            else if( r == 'Lose'){
                IAS.innerHTML = parseInt(IAS.textContent)+1;
            }
        }
    </script>
</body>
</html>